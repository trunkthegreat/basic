<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch API Demo</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif; /* Using Inter font */
        }
        .content-container {
            min-height: 100px; /* Ensure container has some height even when empty */
            border-width: 2px; /* For a visible border */
        }
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #09f;
            animation: spin 1s ease infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-4 sm:p-8 flex flex-col items-center">

    <div class="w-full max-w-3xl bg-white p-6 sm:p-8 rounded-xl shadow-2xl">
        <header class="mb-8 text-center">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-800">Fetch API Demonstration</h1>
            <p class="text-gray-600 mt-2">Fetching content from local HTML and JSON files.</p>
        </header>

        <!-- Section for fetching HTML content -->
        <section class="mb-8">
            <h2 class="text-2xl font-semibold text-indigo-700 mb-3">Fetched HTML Content:</h2>
            <div id="html-placeholder" class="content-container bg-indigo-50 border-indigo-200 text-indigo-800 p-4 rounded-lg shadow-md transition-all duration-300 ease-in-out">
                <!-- Loading spinner for HTML -->
                <div class="loading-spinner mx-auto" id="html-loading"></div>
                <!-- Error message placeholder -->
                <p id="html-error" class="text-red-500 hidden"></p>
            </div>
            <button id="fetch-html-button" class="mt-4 bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg shadow transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-300">
                Fetch HTML Content
            </button>
        </section>

        <!-- Section for fetching JSON data -->
        <section>
            <h2 class="text-2xl font-semibold text-teal-700 mb-3">Fetched JSON Data:</h2>
            <div id="json-placeholder" class="content-container bg-teal-50 border-teal-200 text-teal-800 p-4 rounded-lg shadow-md transition-all duration-300 ease-in-out">
                <!-- Loading spinner for JSON -->
                <div class="loading-spinner mx-auto" id="json-loading"></div>
                <!-- Error message placeholder -->
                <p id="json-error" class="text-red-500 hidden"></p>
                <pre class="whitespace-pre-wrap break-all"></pre> <!-- For formatted JSON output -->
            </div>
            <button id="fetch-json-button" class="mt-4 bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded-lg shadow transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-teal-300">
                Fetch JSON Data
            </button>
        </section>

        <footer class="mt-12 text-center text-gray-500 text-sm">
            <p>Demo using Fetch API and Tailwind CSS.</p>
        </footer>
    </div>

    <script>
        // Get placeholder elements, loading indicators, and error message elements
        const htmlPlaceholder = document.getElementById('html-placeholder');
        const jsonPlaceholder = document.getElementById('json-placeholder').querySelector('pre');
        const htmlLoading = document.getElementById('html-loading');
        const jsonLoading = document.getElementById('json-loading');
        const htmlErrorEl = document.getElementById('html-error');
        const jsonErrorEl = document.getElementById('json-error');

        // Get button elements
        const fetchHtmlButton = document.getElementById('fetch-html-button');
        const fetchJsonButton = document.getElementById('fetch-json-button');

        /**
         * Fetches and displays HTML content.
         * @param {string} url - The URL to fetch HTML from.
         */
        async function fetchHtmlContent(url) {
            // Show loading spinner and hide error
            htmlLoading.classList.remove('hidden');
            htmlPlaceholder.querySelector('div:not(.loading-spinner)')?.remove(); // Remove previous content if any
            htmlErrorEl.classList.add('hidden');
            htmlErrorEl.textContent = '';

            try {
                // Fetch the HTML file
                const response = await fetch(url);
                if (!response.ok) {
                    // Handle HTTP errors
                    throw new Error(`HTTP error! Status: ${response.status} - ${response.statusText}`);
                }
                const htmlText = await response.text();
                
                // Hide loading spinner
                htmlLoading.classList.add('hidden');
                
                // Create a temporary div to parse the HTML string
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = htmlText;

                // Extract only the body content if the fetched HTML is a full document
                const fetchedBodyContent = tempDiv.querySelector('body') ? tempDiv.querySelector('body').innerHTML : htmlText;

                // Display the fetched HTML content
                const contentDiv = document.createElement('div');
                contentDiv.innerHTML = fetchedBodyContent;
                htmlPlaceholder.appendChild(contentDiv);

            } catch (error) {
                // Handle any errors that occurred during fetch
                console.error('Error fetching HTML:', error);
                htmlLoading.classList.add('hidden');
                htmlErrorEl.textContent = `Failed to load HTML: ${error.message}. Check if 'fetchdata.html' exists in the same folder and the server is running or allows local file access.`;
                htmlErrorEl.classList.remove('hidden');
            }
        }

        /**
         * Fetches and displays JSON data.
         * @param {string} url - The URL to fetch JSON from.
         */
        async function fetchJsonData(url) {
            // Show loading spinner and hide error
            jsonLoading.classList.remove('hidden');
            jsonPlaceholder.textContent = ''; // Clear previous content
            jsonErrorEl.classList.add('hidden');
            jsonErrorEl.textContent = '';
            
            try {
                // Fetch the JSON file
                const response = await fetch(url);
                if (!response.ok) {
                    // Handle HTTP errors
                    throw new Error(`HTTP error! Status: ${response.status} - ${response.statusText}`);
                }
                const jsonData = await response.json();
                
                // Hide loading spinner
                jsonLoading.classList.add('hidden');
                
                // Display the fetched JSON data, nicely formatted
                jsonPlaceholder.textContent = JSON.stringify(jsonData, null, 2); // null, 2 for pretty printing

            } catch (error) {
                // Handle any errors that occurred during fetch
                console.error('Error fetching JSON:', error);
                jsonLoading.classList.add('hidden');
                jsonErrorEl.textContent = `Failed to load JSON: ${error.message}. Check if 'fetchdata.json' exists and is valid JSON.`;
                jsonErrorEl.classList.remove('hidden');
            }
        }

        // Add event listeners to buttons
        fetchHtmlButton.addEventListener('click', () => {
            // Use './fetchdata.html' for relative path
            fetchHtmlContent('./fetchdata.html');
        });

        fetchJsonButton.addEventListener('click', () => {
            // Use './fetchdata.json' for relative path
            fetchJsonData('./fetchdata.json');
        });

        // --- Optional: Automatically fetch on page load ---
        // Uncomment the lines below to fetch data when the page loads
        // window.addEventListener('DOMContentLoaded', () => {
        //     fetchHtmlContent('./fetchdata.html');
        //     fetchJsonData('./fetchdata.json');
        // });
        // --- End Optional ---

    </script>
</body>
</html>
